[build]
setup = [
  "echo 'Setting up Django application'"
]

[phases]
  [phases.setup]
  name = "Setting up Python environment"
  
  [phases.install]
  name = "Installing Python dependencies"
  
  [phases.start]
  name = "Starting Django application"

[variables]
PYTHON_VERSION = "3.11"
PORT = "8000"
PIP_FLAGS = "--pre"
NIXPACKS_PIP_FLAGS = "--pre"

[install]
cmds = [
  "pip install --pre -r requirements.txt"
]

[start]
cmd = "cd landingpage && PYTHONPATH=/app/landingpage python manage.py migrate && PYTHONPATH=/app/landingpage gunicorn landingpage.wsgi:application"